/*!CK:3845249416!*//*1388985148,178183243*/

if (self.CavalryLogger) { CavalryLogger.start_js(["EpUDz"]); }

__d("StarsInput",["Event","ArbiterMixin","DOM","Parent","Run","copyProperties"],function(a,b,c,d,e,f){var g=b('Event'),h=b('ArbiterMixin'),i=b('DOM'),j=b('Parent'),k=b('Run'),l=b('copyProperties');function m(n,o){this.root=n;this.hidden=o;this.stars=i.scry(n,'span');this.listeners=[g.listen(this.root,'click',this._onClick.bind(this))];k.onLeave(this.destroyListeners.bind(this));}l(m.prototype,h,{_onClick:function(event){var n=this._getStarIndexFromEvent(event);if(!n)return;this.hidden.value=n;this.inform('stars/value_changed');},_getStarIndexFromEvent:function(event){var n=j.byTag(event.getTarget(),'span');if(n)return this.stars.indexOf(n)+1;return 0;},destroyListeners:function(){this.listeners.forEach(function(n){n&&n.remove();});this.listeners=[];}});a.StarsInput=e.exports=m;});
__d("StarsRatableBase",["Event","CSS","DOM","Parent","Run","copyProperties"],function(a,b,c,d,e,f){var g=b('Event'),h=b('CSS'),i=b('DOM'),j=b('Parent'),k=b('Run'),l=b('copyProperties');function m(n,o,p){this.root=n;this.freezeOnClick=o;this.stars=i.scry(n,'span');this.listeners=[g.listen(this.root,'click',this._onClick.bind(this)),g.listen(this.root,'mousemove',this._onMouseMove.bind(this)),g.listen(this.root,'mouseout',this._onMouseOut.bind(this))];this.holdMouseMove=false;this.setRating(p);k.onLeave(this.destroyListeners.bind(this));}m.init=function(n,o,p){return new m(n,o,p);};l(m.prototype,{_onClick:function(event){var n=this._getStarIndexFromEvent(event);if(!n)return;this.setRating(n);if(this.freezeOnClick){this.freeze();}else this.holdMouseMove=true;},_onMouseMove:function(event){if(this.holdMouseMove)return;var n=this._getStarIndexFromEvent(event);if(!n)return;this.setStars(n,true);},_onMouseOut:function(event){this.holdMouseMove=false;this.updateStars();},_getStarIndexFromEvent:function(event){var n=j.byTag(event.getTarget(),'span');if(n)return this.stars.indexOf(n)+1;return 0;},setRating:function(n){this._rating=n;this.updateStars();},updateStars:function(){this.setStars(this._rating);},setStars:function(n,o){var p=o?'hoverStar':'fullStar',q=o?'fullStar':'hoverStar';for(var r=0;r<this.stars.length;++r){h.removeClass(this.stars[r],q);var s=(r>=n);h.conditionClass(this.stars[r],p,!s);h.conditionClass(this.stars[r],'emptyStar',s);}},freeze:function(){h.addClass(this.root,'uiStarsRated');this.destroyListeners();},destroyListeners:function(){this.listeners.forEach(function(n){n&&n.remove();});this.listeners=[];}});a.StarsRatableBase=e.exports=m;});
__d("EgoCollectionsRecommendation",["Arbiter","AsyncRequest","DOM","DOMClone","Tooltip","csx","isEmpty"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncRequest'),i=b('DOM'),j=b('DOMClone'),k=b('Tooltip'),l=b('csx'),m=b('isEmpty'),n={},o={},p=1500;function q(t,u){new h(t).setHandler(function(v){if(!v.payload)return;var w=null;for(var x in u){if(!w){i.setContent(u[x],v.payload.icon);w=(u[x]).firstChild;}else i.setContent(u[x],w=j.shallowClone(w));k.set(w,v.payload.tooltip);}}).send();}function r(t,u,event,v){if(v.category!==t)return;var w=o[t];if(!m(w))setTimeout(q.bind(null,u,w),p);}var s={keepIconSynced:function(t,u,v){if(!n[v])n[v]=g.subscribe('AudienceSelector/syncNonSelectorIcon',r.bind(null,v,u));o[v]||(o[v]={});o[v][t.id]=t;},replaceOrInsertTopUnit:function(t,u){if(!t)return;var v=i.scry(t,'^.ego_unit_container')[0];if(!v)return;var w=i.scry(v,"._53ee");if(w[0]){i.replace(w[0],u);}else i.prependContent(v,u);}};e.exports=s;});
__d("CovercardArrow",["ContextualDialogArrow","CSS","DOMQuery","Locale","Style","csx","cx"],function(a,b,c,d,e,f){var g=b('ContextualDialogArrow'),h=b('CSS'),i=b('DOMQuery'),j=b('Locale'),k=b('Style'),l=b('csx'),m=b('cx'),n=-45,o=45,p=10;if(j.isRTL()){n=-n;o=-o;}function q(s){"use strict";this._layer=s;}q.prototype.enable=function(){"use strict";this._layer.enableBehavior(g);var s=this._layer.getContentRoot();this._arrowWrapper=i.scry(s,"._7lh")[0];if(!this._arrowWrapper)return;this._arrowShadow=i.scry(this._arrowWrapper,"._7li")[0];if(!this._arrowShadow)return;var t=null;if(this._arrowWrapper.style.webkitMaskPosition!==undefined){t=this._renderArrowWithWebkitMask.bind(this);h.addClass(s,"_7ld");}else if(r(this._arrowWrapper)){t=this._renderArrowWithRotate.bind(this);h.addClass(s,"_7le");}if(!t)return;if(j.isRTL())h.addClass(s,"_7lf");this._subscription=this._layer.subscribe('reposition',function(u,v){var w=v.getPosition()=='below';h.conditionClass(s,"_53ih",w);w&&t(v);});};q.prototype.disable=function(){"use strict";this._subscription&&this._subscription.unsubscribe();this._subscription=null;};q.prototype._calculateArrowOffset=function(s){"use strict";var t=g.getOffsetPercent(s),u=g.getOffset(s,t,this._layer),v=k.get(this._layer.getContentRoot(),'width');return parseInt(v,10)*(t/100)+u;};q.prototype._renderArrowWithWebkitMask=function(s){"use strict";var t=g.getOffsetSide(s),u=this._calculateArrowOffset(s);if(j.isRTL()){var v=k.get(this._layer.getContentRoot(),'width');u=parseInt(v,10)-u-this._layer.getArrowDimensions().offset;t=t=='left'?'right':'left';}k.set(this._arrowWrapper,'webkitMaskPositionX',u+'px');k.set(this._arrowShadow,t,u+'px');};q.prototype._renderArrowWithRotate=function(s){"use strict";var t=i.scry(this._arrowWrapper,"._7lj")[0];if(!t)return;var u=r(this._arrowWrapper);if(!u)return;var v=this._calculateArrowOffset(s),w=p+v;if(j.isRTL())w=-w;this._arrowWrapper.style[u]='translate('+w+'px, -'+p+'px) '+'rotate('+o+'deg)';t.style[u]='rotate('+n+'deg) '+'translate('+(-w)+'px, 0px)';};function r(s){if(!s)s=document.body;var t=['transform','WebkitTransform','msTransform','MozTransform','OTransform'],u;while(u=t.shift())if(s.style[u]!==undefined)return u;return null;}e.exports=q;});